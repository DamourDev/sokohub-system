{% comment %} {% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'landing_page' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'products_list' %}">Products</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
      </ol>
    </nav>

    <div class="row">
        <!-- Product Image -->
        <div class="col-md-6 mb-4">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="img-fluid rounded shadow-sm" 
                     style="object-fit:contain; max-height:500px; width:100%;" alt="{{ product.name }}">
            {% else %}
                <img src="{% static 'images/placeholder.png' %}" class="img-fluid rounded shadow-sm"
                     style="object-fit:contain; max-height:500px; width:100%;" alt="No image">
            {% endif %}
        </div>

        <!-- Product Details -->
        <div class="col-md-6">
            <h2 class="fw-bold">{{ product.name }}</h2>
            <strong>Price:</strong><p class="fs-3 text-primary">{{ product.price }} Frw</p>
            <p><strong>Description: </strong>{{ product.description }}</p>

            <!-- Vendor link -->
            {% if product.vendor %}
                <p><strong>Vendor:</strong> <a href="{% url 'vendor_public_products' product.vendor.pk %}">
                    {{ product.vendor.username }}
                </a></p>
            {% else %}
                <p>Vendor: Unknown</p>
            {% endif %}

            <!-- Stock and Buy form -->
            {% if product.stock > 0 %}
                <span class="badge bg-success mb-3">In Stock: {{ product.stock }}</span>
                <form action="{% url 'checkout' product.pk %}" method="GET" class="mb-3">
                    {% csrf_token %}
                    <label for="quantity" class="form-label fw-bold">Quantity:</label>
                    <select name="quantity" id="quantity" class="form-select w-auto mb-3">
                        {% for q in quantity_range %}
                            <option value="{{ q }}">{{ q }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-primary">Buy Now</button>
                </form>
            {% else %}
                <span class="badge bg-danger mb-3">Out of Stock</span>
                <button class="btn btn-secondary" disabled>Buy Now</button>
            {% endif %}

            <!-- Back button -->
            <a href="{% url 'products_list' %}" class="btn btn-outline-secondary mt-3">‚Üê Back to Products</a>
        </div>
    </div>
</div>
{% endblock content %} {% endcomment %}
